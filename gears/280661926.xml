<Item class="Model" referent="RBXEA627BEBB9A64A45AFEEA1F0B7F1BD2A">
			<Properties>
				<BinaryString name="AttributesSerialize" />
				<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
				<bool name="DefinesCapabilities">false</bool>
				<token name="LevelOfDetail">0</token>
				<CoordinateFrame name="ModelMeshCFrame">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
					<R00>1</R00>
					<R01>0</R01>
					<R02>0</R02>
					<R10>0</R10>
					<R11>1</R11>
					<R12>0</R12>
					<R20>0</R20>
					<R21>0</R21>
					<R22>1</R22>
				</CoordinateFrame>
				<SharedString name="ModelMeshData">yuZpQdnvvUBOTYh1jqZ2cA==</SharedString>
				<Vector3 name="ModelMeshSize">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
				</Vector3>
				<token name="ModelStreamingMode">0</token>
				<string name="Name">280661926</string>
				<bool name="NeedsPivotMigration">false</bool>
				<Ref name="PrimaryPart">null</Ref>
				<float name="ScaleFactor">1</float>
				<int64 name="SourceAssetId">-1</int64>
				<BinaryString name="Tags" />
				<OptionalCoordinateFrame name="WorldPivotData" />
			</Properties>
			<Item class="Tool" referent="RBX9407CD1450B04D94A5EB4C06867DD585">
				<Properties>
					<BinaryString name="AttributesSerialize" />
					<bool name="CanBeDropped">true</bool>
					<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
					<bool name="DefinesCapabilities">false</bool>
					<bool name="Enabled">true</bool>
					<CoordinateFrame name="Grip">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
						<R00>1</R00>
						<R01>0</R01>
						<R02>0</R02>
						<R10>0</R10>
						<R11>1</R11>
						<R12>0</R12>
						<R20>0</R20>
						<R21>0</R21>
						<R22>1</R22>
					</CoordinateFrame>
					<token name="LevelOfDetail">0</token>
					<bool name="ManualActivationOnly">false</bool>
					<CoordinateFrame name="ModelMeshCFrame">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
						<R00>1</R00>
						<R01>0</R01>
						<R02>0</R02>
						<R10>0</R10>
						<R11>1</R11>
						<R12>0</R12>
						<R20>0</R20>
						<R21>0</R21>
						<R22>1</R22>
					</CoordinateFrame>
					<SharedString name="ModelMeshData">yuZpQdnvvUBOTYh1jqZ2cA==</SharedString>
					<Vector3 name="ModelMeshSize">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<token name="ModelStreamingMode">0</token>
					<string name="Name">MysticalStaffOfCyanLightningMagic</string>
					<bool name="NeedsPivotMigration">false</bool>
					<Ref name="PrimaryPart">null</Ref>
					<bool name="RequiresHandle">true</bool>
					<float name="ScaleFactor">1</float>
					<int64 name="SourceAssetId">-1</int64>
					<BinaryString name="Tags" />
					<Content name="TextureId"><url>http://www.roblox.com/asset/?id=276092020</url></Content>
					<string name="ToolTip" />
					<OptionalCoordinateFrame name="WorldPivotData">
						<CFrame>
							<X>-0.499998987</X>
							<Y>3.064224</Y>
							<Z>0.000426999992</Z>
							<R00>0.00102147646</R00>
							<R01>-2.19987669e-06</R01>
							<R02>0.999999404</R02>
							<R10>0.690043509</R10>
							<R11>0.723767221</R11>
							<R12>-0.000703365542</R12>
							<R20>-0.723767221</R20>
							<R21>0.690043867</R21>
							<R22>0.000740786083</R22>
						</CFrame>
					</OptionalCoordinateFrame>
				</Properties>
				<Item class="Part" referent="RBX212A70783FBC4B5492F607B7D9BFBD72">
					<Properties>
						<bool name="Anchored">false</bool>
						<BinaryString name="AttributesSerialize" />
						<bool name="AudioCanCollide">true</bool>
						<float name="BackParamA">-0.5</float>
						<float name="BackParamB">0.5</float>
						<token name="BackSurface">0</token>
						<token name="BackSurfaceInput">0</token>
						<float name="BottomParamA">-0.5</float>
						<float name="BottomParamB">0.5</float>
						<token name="BottomSurface">0</token>
						<token name="BottomSurfaceInput">0</token>
						<CoordinateFrame name="CFrame">
							<X>-0.499998987</X>
							<Y>3.064224</Y>
							<Z>0.000426999992</Z>
							<R00>0.00102147646</R00>
							<R01>-2.19987669e-06</R01>
							<R02>0.999999404</R02>
							<R10>0.690043509</R10>
							<R11>0.723767221</R11>
							<R12>-0.000703365542</R12>
							<R20>-0.723767221</R20>
							<R21>0.690043867</R21>
							<R22>0.000740786083</R22>
						</CoordinateFrame>
						<bool name="CanCollide">true</bool>
						<bool name="CanQuery">true</bool>
						<bool name="CanTouch">true</bool>
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="CastShadow">true</bool>
						<string name="CollisionGroup">Default</string>
						<int name="CollisionGroupId">0</int>
						<Color3uint8 name="Color3uint8">4288914085</Color3uint8>
						<PhysicalProperties name="CustomPhysicalProperties">
							<CustomPhysics>false</CustomPhysics>
						</PhysicalProperties>
						<bool name="DefinesCapabilities">false</bool>
						<bool name="EnableFluidForces">true</bool>
						<float name="FrontParamA">-0.5</float>
						<float name="FrontParamB">0.5</float>
						<token name="FrontSurface">0</token>
						<token name="FrontSurfaceInput">0</token>
						<float name="LeftParamA">-0.5</float>
						<float name="LeftParamB">0.5</float>
						<token name="LeftSurface">0</token>
						<token name="LeftSurfaceInput">0</token>
						<bool name="Locked">true</bool>
						<bool name="Massless">false</bool>
						<token name="Material">256</token>
						<string name="MaterialVariantSerialized" />
						<string name="Name">Handle</string>
						<CoordinateFrame name="PivotOffset">
							<X>0</X>
							<Y>0</Y>
							<Z>0</Z>
							<R00>1</R00>
							<R01>0</R01>
							<R02>0</R02>
							<R10>0</R10>
							<R11>1</R11>
							<R12>0</R12>
							<R20>0</R20>
							<R21>0</R21>
							<R22>1</R22>
						</CoordinateFrame>
						<float name="Reflectance">0</float>
						<float name="RightParamA">-0.5</float>
						<float name="RightParamB">0.5</float>
						<token name="RightSurface">0</token>
						<token name="RightSurfaceInput">0</token>
						<int name="RootPriority">0</int>
						<Vector3 name="RotVelocity">
							<X>0</X>
							<Y>0</Y>
							<Z>0</Z>
						</Vector3>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
						<float name="TopParamA">-0.5</float>
						<float name="TopParamB">0.5</float>
						<token name="TopSurface">0</token>
						<token name="TopSurfaceInput">0</token>
						<float name="Transparency">0</float>
						<Vector3 name="Velocity">
							<X>0</X>
							<Y>0</Y>
							<Z>0</Z>
						</Vector3>
						<token name="formFactorRaw">3</token>
						<token name="shape">1</token>
						<Vector3 name="size">
							<X>0.5</X>
							<Y>6</Y>
							<Z>0.5</Z>
						</Vector3>
					</Properties>
					<Item class="SpecialMesh" referent="RBX437949DFF8B048F3995B3497A0D58760">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<Content name="MeshId"><url>http://www.roblox.com/asset/?id=283705926</url></Content>
							<token name="MeshType">5</token>
							<string name="Name">Mesh</string>
							<Vector3 name="Offset">
								<X>0</X>
								<Y>0</Y>
								<Z>0</Z>
							</Vector3>
							<Vector3 name="Scale">
								<X>1</X>
								<Y>1</Y>
								<Z>1</Z>
							</Vector3>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<Content name="TextureId"><url>http://www.roblox.com/asset/?id=276091966</url></Content>
							<Vector3 name="VertexColor">
								<X>1</X>
								<Y>1</Y>
								<Z>1</Z>
							</Vector3>
						</Properties>
					</Item>
					<Item class="PointLight" referent="RBX7CD834198B454364816433FF55BB20BD">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<float name="Brightness">50</float>
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<Color3 name="Color">
								<R>0</R>
								<G>1</G>
								<B>1</B>
							</Color3>
							<bool name="DefinesCapabilities">false</bool>
							<bool name="Enabled">true</bool>
							<string name="Name">PointLight</string>
							<float name="Range">6</float>
							<bool name="Shadows">false</bool>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
						</Properties>
					</Item>
					<Item class="ParticleEmitter" referent="RBXD288E7CAA6164AEA88B9636ECF0BBF0B">
						<Properties>
							<Vector3 name="Acceleration">
								<X>0</X>
								<Y>10</Y>
								<Z>0</Z>
							</Vector3>
							<BinaryString name="AttributesSerialize" />
							<float name="Brightness">1</float>
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<ColorSequence name="Color">0 0 1 1 0 1 0 0.666667 1 0 </ColorSequence>
							<bool name="DefinesCapabilities">false</bool>
							<float name="Drag">0</float>
							<token name="EmissionDirection">1</token>
							<bool name="Enabled">true</bool>
							<NumberRange name="FlipbookFramerate">1 1 </NumberRange>
							<string name="FlipbookIncompatible">Particle texture must be 1024 by 1024 to use flipbooks.</string>
							<token name="FlipbookLayout">0</token>
							<token name="FlipbookMode">0</token>
							<bool name="FlipbookStartRandom">false</bool>
							<NumberRange name="Lifetime">0.2 0.3 </NumberRange>
							<float name="LightEmission">1</float>
							<float name="LightInfluence">0</float>
							<bool name="LockedToPart">false</bool>
							<string name="Name">Particles</string>
							<token name="Orientation">0</token>
							<float name="Rate">1000</float>
							<NumberRange name="RotSpeed">15 25 </NumberRange>
							<NumberRange name="Rotation">0 5 </NumberRange>
							<token name="Shape">0</token>
							<token name="ShapeInOut">0</token>
							<float name="ShapePartial">1</float>
							<token name="ShapeStyle">0</token>
							<NumberSequence name="Size">0 0.32 0 0.79 1.18 0 1 1.25 0 </NumberSequence>
							<int64 name="SourceAssetId">-1</int64>
							<NumberRange name="Speed">-0.25 -0.25 </NumberRange>
							<Vector2 name="SpreadAngle">
								<X>0</X>
								<Y>0</Y>
							</Vector2>
							<NumberSequence name="Squash">0 0 0 1 0 0 </NumberSequence>
							<BinaryString name="Tags" />
							<Content name="Texture"><url>rbxasset://textures/particles/fire_main.dds</url></Content>
							<float name="TimeScale">1</float>
							<NumberSequence name="Transparency">0 0.6 0 1 0.6 0 </NumberSequence>
							<float name="VelocityInheritance">0</float>
							<bool name="WindAffectsDrag">false</bool>
							<float name="ZOffset">0</float>
						</Properties>
					</Item>
					<Item class="Sound" referent="RBXECA0439E957C4046969753AA36A277DD">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<bool name="IsMutedForCapture">false</bool>
							<NumberRange name="LoopRegion">0 60000 </NumberRange>
							<bool name="Looped">true</bool>
							<string name="Name">Strike</string>
							<bool name="PlayOnRemove">false</bool>
							<NumberRange name="PlaybackRegion">0 60000 </NumberRange>
							<bool name="PlaybackRegionsEnabled">false</bool>
							<float name="PlaybackSpeed">2</float>
							<bool name="Playing">false</bool>
							<float name="RollOffMaxDistance">10000</float>
							<float name="RollOffMinDistance">10</float>
							<token name="RollOffMode">0</token>
							<Ref name="SoundGroup">null</Ref>
							<Content name="SoundId"><url>http://www.roblox.com/asset/?id=115327352</url></Content>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<double name="TimePosition">0</double>
							<float name="Volume">0.734608471</float>
						</Properties>
					</Item>
					<Item class="Sound" referent="RBXC55DFD8D90FB46999B685454D23C6BEE">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<bool name="IsMutedForCapture">false</bool>
							<NumberRange name="LoopRegion">0 60000 </NumberRange>
							<bool name="Looped">false</bool>
							<string name="Name">Lightning</string>
							<bool name="PlayOnRemove">false</bool>
							<NumberRange name="PlaybackRegion">0 60000 </NumberRange>
							<bool name="PlaybackRegionsEnabled">false</bool>
							<float name="PlaybackSpeed">1</float>
							<bool name="Playing">false</bool>
							<float name="RollOffMaxDistance">10000</float>
							<float name="RollOffMinDistance">10</float>
							<token name="RollOffMode">0</token>
							<Ref name="SoundGroup">null</Ref>
							<Content name="SoundId"><url>http://www.roblox.com/asset/?id=156190087</url></Content>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<double name="TimePosition">0</double>
							<float name="Volume">1</float>
						</Properties>
					</Item>
					<Item class="Sound" referent="RBX02A000FE8E1142CDB6F0B6B3D4A41EBA">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<bool name="IsMutedForCapture">false</bool>
							<NumberRange name="LoopRegion">0 60000 </NumberRange>
							<bool name="Looped">false</bool>
							<string name="Name">Zap</string>
							<bool name="PlayOnRemove">false</bool>
							<NumberRange name="PlaybackRegion">0 60000 </NumberRange>
							<bool name="PlaybackRegionsEnabled">false</bool>
							<float name="PlaybackSpeed">1.25</float>
							<bool name="Playing">false</bool>
							<float name="RollOffMaxDistance">10000</float>
							<float name="RollOffMinDistance">10</float>
							<token name="RollOffMode">0</token>
							<Ref name="SoundGroup">null</Ref>
							<Content name="SoundId"><url>http://www.roblox.com/asset/?id=156190087</url></Content>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<double name="TimePosition">0</double>
							<float name="Volume">1</float>
						</Properties>
					</Item>
					<Item class="Sound" referent="RBX0F09CD0B4AEA447A8C06B4855D9DE92D">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<bool name="IsMutedForCapture">false</bool>
							<NumberRange name="LoopRegion">0 60000 </NumberRange>
							<bool name="Looped">false</bool>
							<string name="Name">Lightning2</string>
							<bool name="PlayOnRemove">false</bool>
							<NumberRange name="PlaybackRegion">0 60000 </NumberRange>
							<bool name="PlaybackRegionsEnabled">false</bool>
							<float name="PlaybackSpeed">1</float>
							<bool name="Playing">false</bool>
							<float name="RollOffMaxDistance">10000</float>
							<float name="RollOffMinDistance">10</float>
							<token name="RollOffMode">0</token>
							<Ref name="SoundGroup">null</Ref>
							<Content name="SoundId"><url>http://www.roblox.com/asset/?id=96478426</url></Content>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<double name="TimePosition">0</double>
							<float name="Volume">1</float>
						</Properties>
					</Item>
				</Item>
				<Item class="LocalScript" referent="RBXA1F58A208F8B49788742AAD8A576BCAF">
					<Properties>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<bool name="Disabled">false</bool>
						<Content name="LinkedSource"><null /></Content>
						<string name="Name">LocalScript</string>
						<token name="RunContext">0</token>
						<string name="ScriptGuid">{52B55103-E0CF-4E92-B220-4B2D0CDCCEF3}</string>
						<ProtectedString name="Source">--Made by Luckymaxer

Tool = script.Parent
Handle = Tool:WaitForChild("Handle")

Players = game:GetService("Players")
RunService = game:GetService("RunService")
ContentProvider = game:GetService("ContentProvider")

local function Create_PrivImpl(objectType)
	if type(objectType) ~= 'string' then
		error("Argument of Create must be a string", 2)
	end
	--return the proxy function that gives us the nice Create'string'{data} syntax
	--The first function call is a function call using Lua's single-string-argument syntax
	--The second function call is using Lua's single-table-argument syntax
	--Both can be chained together for the nice effect.
	return function(dat)
		--default to nothing, to handle the no argument given case
		dat = dat or {}

		--make the object to mutate
		local obj = Instance.new(objectType)
		local parent = nil

		--stored constructor function to be called after other initialization
		local ctor = nil

		for k, v in pairs(dat) do
			--add property
			if type(k) == 'string' then
				if k == 'Parent' then
					-- Parent should always be set last, setting the Parent of a new object
					-- immediately makes performance worse for all subsequent property updates.
					parent = v
				else
					obj[k] = v
				end


			--add child
			elseif type(k) == 'number' then
				if type(v) ~= 'userdata' then
					error("Bad entry in Create body: Numeric keys must be paired with children, got a: "..type(v), 2)
				end
				v.Parent = obj


			--event connect
			elseif type(k) == 'table' and k.__eventname then
				if type(v) ~= 'function' then
					error("Bad entry in Create body: Key `[Create.E\'"..k.__eventname.."\']` must have a function value\
							got: "..tostring(v), 2)
				end
				obj[k.__eventname]:connect(v)


			--define constructor function
			elseif k == t.Create then
				if type(v) ~= 'function' then
					error("Bad entry in Create body: Key `[Create]` should be paired with a constructor function, \
							got: "..tostring(v), 2)
				elseif ctor then
					--ctor already exists, only one allowed
					error("Bad entry in Create body: Only one constructor function is allowed", 2)
				end
				ctor = v


			else
				error("Bad entry ("..tostring(k).." =&gt; "..tostring(v)..") in Create body", 2)
			end
		end

		--apply constructor function if it exists
		if ctor then
			ctor(obj)
		end

		if parent then
			obj.Parent = parent
		end

		--return the completed object
		return obj
	end
end

--now, create the functor:
Create = setmetatable({}, {__call = function(tb, ...) return Create_PrivImpl(...) end})

--and create the "Event.E" syntax stub. Really it's just a stub to construct a table which our Create
--function can recognize as special.
Create.E = function(eventName)
	return {__eventname = eventName}
end


Animations = {}

ServerControl = Tool:WaitForChild("ServerControl")
ClientControl = Tool:WaitForChild("ClientControl")

Rate = (1 / 60)

MobilityDisabled = false
ToolEquipped = false

function SetAnimation(mode, value)
	if not ToolEquipped or not CheckIfAlive() then
		return
	end
	local function StopAnimation(Animation)
		for i, v in pairs(Animations) do
			if v.Animation == Animation then
				v.AnimationTrack:Stop(value.EndFadeTime)
				for i, v in pairs({v.KeyframeReached, v.TrackStopped}) do
					if v then
						v:disconnect()
					end
				end
				table.remove(Animations, i)
			end
		end
	end
	if mode == "PlayAnimation" then
		for i, v in pairs(Animations) do
			if v.Animation == value.Animation then
				if value.Speed then
					v.AnimationTrack:AdjustSpeed(value.Speed)
					return
				elseif value.Weight or value.FadeTime then
					v.AnimationTrack:AdjustWeight(value.Weight, value.FadeTime)
					return
				else
					StopAnimation(value.Animation, false)
				end
			end
		end
		local AnimationMonitor = Create("Model"){}
		local TrackEnded = Create("StringValue"){Name = "Ended"}
		local AnimationTrack = Humanoid:LoadAnimation(value.Animation)
		local TrackStopped, KeyframeReached
		if value.PauseAt then
			KeyframeReached = AnimationTrack.KeyframeReached:connect(function(Keyframe)
				if Keyframe == value.PauseAt then
					AnimationTrack:AdjustSpeed(0)
					if KeyframeReached then
						KeyframeReached:disconnect()
					end
				end
			end)
		end
		if not value.Manual then
			TrackStopped = AnimationTrack.Stopped:connect(function()
				if TrackStopped then
					TrackStopped:disconnect()
				end
				StopAnimation(value.Animation, true)
				TrackEnded.Parent = AnimationMonitor
			end)
		end
		table.insert(Animations, {Animation = value.Animation, AnimationTrack = AnimationTrack, KeyframeReached = KeyframeReached, TrackStopped = TrackStopped})
		AnimationTrack:Play(value.FadeTime, value.Weight, value.Speed)
		if TrackStopped then
			AnimationMonitor:WaitForChild(TrackEnded.Name)
		end
		return TrackEnded.Name
	elseif mode == "StopAnimation" and value then
		StopAnimation(value.Animation)
	end
end

function DisableMobility(Boolean)
	if Boolean and MobilityDisabled then
		return
	end
	if MobilityDisabler then
		MobilityDisabler:disconnect()
	end
	MobilityDisabled = Boolean
	if MobilityDisabled then
		Humanoid.AutoRotate = false
		Humanoid.WalkSpeed = 0
		MobilityDisabler = Humanoid.Changed:connect(function(Property)
			Humanoid.Jump = false
			Humanoid.AutoRotate = false
			Humanoid.WalkSpeed = 0
		end)
	else
		Humanoid.AutoRotate = true
		Humanoid.WalkSpeed = 16
	end
end

function CheckIfAlive()
	return (((Character and Character.Parent and Humanoid and Humanoid.Parent and Humanoid.Health &gt; 0 and Player and Player.Parent) and true) or false)
end

function Equipped(Mouse)
	Character = Tool.Parent
	Player = Players:GetPlayerFromCharacter(Character)
	Humanoid = Character:FindFirstChild("Humanoid")
	ToolEquipped = true
	if not CheckIfAlive() then
		return
	end
	Spawn(function()
		PlayerMouse = Player:GetMouse()
		Mouse.Button1Down:connect(function()
			InvokeServer("Button1Click", {Down = true})
		end)
		Mouse.Button1Up:connect(function()
			InvokeServer("Button1Click", {Down = false})
		end)
		Mouse.KeyDown:connect(function(Key)
			InvokeServer("KeyPress", {Key = Key, Down = true})
		end)
		Mouse.KeyUp:connect(function(Key)
			InvokeServer("KeyPress", {Key = Key, Down = false})
		end)
		for i, v in pairs(Tool:GetChildren()) do
			if v:IsA("Animation") then
				ContentProvider:Preload(v.AnimationId)
			end
		end
	end)
end

function Unequipped()
	for i, v in pairs(Animations) do
		if v and v.AnimationTrack then
			v.AnimationTrack:Stop()
		end
	end
	DisableMobility(false)
	Animations = {}
	ToolEquipped = false
end

function InvokeServer(mode, value)
	local ServerReturn = nil
	pcall(function()
		ServerReturn = ServerControl:InvokeServer(mode, value)
	end)
	return ServerReturn
end

function OnClientInvoke(mode, value)
	if mode == "PlayAnimation" and value and ToolEquipped and Humanoid then
		SetAnimation("PlayAnimation", value)
	elseif mode == "StopAnimation" and value then
		SetAnimation("StopAnimation", value)
	elseif mode == "PlaySound" and value then
		value:Play()
	elseif mode == "StopSound" and value then
		value:Stop()
	elseif mode == "MousePosition" then
		return {Position = PlayerMouse.Hit.p, Target = PlayerMouse.Target}
	elseif mode == "SetMouse" then
		pcall(function()
			Mouse[value.Property] = value.Value
		end)
	elseif mode == "DisableMobility" then
		local Disabled = value.Disabled
		DisableMobility(value.Disabled)
	end
end

ClientControl.OnClientInvoke = OnClientInvoke
Tool.Equipped:connect(Equipped)
Tool.Unequipped:connect(Unequipped)</ProtectedString>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
				</Item>
				<Item class="LocalScript" referent="RBX57668C00C140447389B575260582ED5D">
					<Properties>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<bool name="Disabled">false</bool>
						<Content name="LinkedSource"><null /></Content>
						<string name="Name">MouseIcon</string>
						<token name="RunContext">0</token>
						<string name="ScriptGuid">{14B714AE-ED3B-4FED-B50A-2DC40B377D72}</string>
						<ProtectedString name="Source">--Made by Luckymaxer

Mouse_Icon = "rbxasset://textures/GunCursor.png"
Reloading_Icon = "rbxasset://textures/GunWaitCursor.png"

Tool = script.Parent

Mouse = nil

function UpdateIcon()
	if Mouse then
		Mouse.Icon = Tool.Enabled and Mouse_Icon or Reloading_Icon
	end
end

function OnEquipped(ToolMouse)
	Mouse = ToolMouse
	UpdateIcon()
end

function OnChanged(Property)
	if Property == "Enabled" then
		UpdateIcon()
	end
end

Tool.Equipped:connect(OnEquipped)
Tool.Changed:connect(OnChanged)
</ProtectedString>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
				</Item>
				<Item class="Animation" referent="RBXA707F406DA1743C98405A395E489FC79">
					<Properties>
						<Content name="AnimationId"><url>http://www.roblox.com/asset/?id=277780975</url></Content>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<string name="Name">Blast</string>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
				</Item>
				<Item class="Animation" referent="RBX72B2B1D035F040FAB4F7F4CBCD513417">
					<Properties>
						<Content name="AnimationId"><url>http://www.roblox.com/asset/?id=280211525</url></Content>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<string name="Name">ArmsUp</string>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
				</Item>
				<Item class="Animation" referent="RBXDAACF70BAFF64C819AF94657E9293610">
					<Properties>
						<Content name="AnimationId"><url>http://www.roblox.com/asset/?id=232937965</url></Content>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<string name="Name">Spin</string>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
				</Item>
				<Item class="Script" referent="RBXF2F48B9AE6644A27BEB43BD063276694">
					<Properties>
						<BinaryString name="AttributesSerialize" />
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<bool name="Disabled">false</bool>
						<Content name="LinkedSource"><null /></Content>
						<string name="Name">Script</string>
						<token name="RunContext">0</token>
						<string name="ScriptGuid">{DBBB3E0F-7083-4E63-ABB8-FC369543789F}</string>
						<ProtectedString name="Source">--Made by Luckymaxer

Tool = script.Parent
Handle = Tool:WaitForChild("Handle")

Players = game:GetService("Players")
Debris = game:GetService("Debris")
RunService = game:GetService("RunService")

LightningFunctions = require(script:WaitForChild("LightningFunctions"))

RbxUtility = LoadLibrary("RbxUtility")
Create = RbxUtility.Create

BaseUrl = "http://www.roblox.com/asset/?id="

Gravity = 196.20
Rate = (1 / 60)

BasePart = Create("Part"){
	Material = Enum.Material.Plastic,
	Shape = Enum.PartType.Block,
	TopSurface = Enum.SurfaceType.Smooth,
	BottomSurface = Enum.SurfaceType.Smooth,
	FormFactor = Enum.FormFactor.Custom,
	Size = Vector3.new(0.2, 0.2, 0.2),
	CanCollide = true,
	Locked = true,
}

ManaBar = script:WaitForChild("ManaBar")

Animations = {
	Blast = {Animation = Tool:WaitForChild("Blast"), FadeTime = nil, Weight = nil, Speed = 1, Duration = 1.5, PauseAt = "Complete"},
	ArmsUp = {Animation = Tool:WaitForChild("ArmsUp"), FadeTime = nil, Weight = nil, Speed = 1, Duration = 1},
	Spin = {Animation = Tool:WaitForChild("Spin"), FadeTime = nil, Weight = nil, Speed = 1, Duration = 0.5},
}

Sounds = {
	Lightning = Handle:WaitForChild("Lightning"),
	Lightning2 = Handle:WaitForChild("Lightning2"),
	Strike = Handle:WaitForChild("Strike"),
	Zap = Handle:WaitForChild("Zap"),

}

CurrentMana = Create("DoubleConstrainedValue"){
	MinValue = 0,
	MaxValue = 100,
}
CurrentMana.Value = (CurrentMana.MaxValue * 0.75)
ManaCharging = Create("BoolValue"){
	Value = false,
}

InUse = Create("BoolValue"){
	Value = false,
}
MouseDown = Create("BoolValue"){
	Value = false,
}
ToolEquipped = Create("BoolValue"){
	Value = false,
}

ServerControl = (Tool:FindFirstChild("ServerControl") or Create("RemoteFunction"){
	Name = "ServerControl",
	Parent = Tool,
})

ClientControl = (Tool:FindFirstChild("ClientControl") or Create("RemoteFunction"){
	Name = "ClientControl",
	Parent = Tool,
})

Handle.Transparency = 0
Tool.Enabled = true

function IsTeamMate(Player1, Player2)
	return (Player1 and Player2 and not Player1.Neutral and not Player2.Neutral and Player1.TeamColor == Player2.TeamColor)
end

function TagHumanoid(humanoid, player)
	local Creator_Tag = Create("ObjectValue"){
		Name = "creator",
		Value = player,
	}
	Debris:AddItem(Creator_Tag, 2)
	Creator_Tag.Parent = humanoid
end

function UntagHumanoid(humanoid)
	for i, v in pairs(humanoid:GetChildren()) do
		if v:IsA("ObjectValue") and v.Name == "creator" then
			v:Destroy()
		end
	end
end

function TakeDamage(humanoid, Damage)
	if not humanoid or not humanoid:IsA("Humanoid") or not Damage or not Player then
		return
	end
	local character = humanoid.Parent
	for i, v in pairs(character:GetChildren()) do
		if v:IsA("ForceField") then
			return
		end
	end
	local player = Players:GetPlayerFromCharacter(character)
	if player then
		if IsTeamMate(Player, player) then
			return
		end
		CurrentMana.Value = (CurrentMana.Value + (CurrentMana.MaxValue * 0.02))
	end
	UntagHumanoid(humanoid)
	TagHumanoid(humanoid, Player)
	humanoid:TakeDamage(Damage)
end

function Clamp(Number, Min, Max)
	return math.max(math.min(Max, Number), Min)
end

function GetPercentage(Start, End, Number)
	return (((Number - Start) / (End - Start)) * 100)
end

function Round(Number, RoundDecimal)
	local WholeNumber, Decimal = math.modf(Number)
	return ((Decimal &gt;= RoundDecimal and math.ceil(Number)) or (Decimal &lt; RoundDecimal and math.floor(Number)))
end

function MakeCircle(Origin, Radius, Parts)
	local Circle = Create("Model"){
		Name = "Circle",
	}
	for i = 1, Parts do
		local Part = BasePart:Clone()
		Part.Name = "Effect"
		Part.Transparency = 1
		Part.Size = Vector3.new(6, 0.2, (Radius * 2))
		Part.Anchored = true
		Part.CanCollide = false
		Part.CFrame = (Origin * CFrame.Angles(0, ((math.pi * 2) / (Parts / i)), 0))
		Part.CFrame = (Part.CFrame + Part.CFrame.lookVector * (Radius / 2))
		Part.Parent = Circle
	end
	return Circle
end

function CheckTableForInstance(Table, Instance)
	for i, v in pairs(Table) do
		if v == Instance then
			return true
		end
	end
	return false
end

function GetAllConnectedParts(Object)
	local Parts = {}
	local function GetConnectedParts(Object)
		for i, v in pairs(Object:GetConnectedParts()) do
			local Ignore = false
			for ii, vv in pairs(Parts) do
				if v == vv then
					Ignore = true
				end
			end
			if not Ignore then
				table.insert(Parts, v)
				GetConnectedParts(v)
			end
		end
	end
	GetConnectedParts(Object)
	return Parts
end

function GetTotalParts(MaxParts, PossibleParts, Parts)
	if MaxParts &lt; PossibleParts then
		return MaxParts
	elseif Parts &gt;= MaxParts then
		return 0
	elseif MaxParts &gt;= PossibleParts then
		local PartCount = (MaxParts - PossibleParts)
		if Parts &lt;= MaxParts then
			PartCount = (MaxParts - Parts)
			if PartCount &gt; PossibleParts then
				return PossibleParts
			else
				return PartCount
			end
		elseif PartCount &gt;= PossibleParts then
			return PossibleParts
		else
			return PartCount
		end
	end
end

function GetParts(Region, MaxParts, Ignore)
	local Parts = {}
	local RerunFailed = false
	while #Parts &lt; MaxParts and not RerunFailed do
		local Region = Region
		local PossibleParts = GetTotalParts(MaxParts, 100, #Parts)
		local PartsNearby = game:GetService("Workspace"):FindPartsInRegion3WithIgnoreList(Region, Ignore, PossibleParts)
		if #PartsNearby == 0 then
			RerunFailed = true
		else
			for i, v in pairs(PartsNearby) do
				table.insert(Parts, v)
				table.insert(Ignore, v)
			end
		end
	end
	return Parts
end

function GetNearbyObjects(Region)
	local IgnoreList = {Character}
	for i, v in pairs(Players:GetChildren()) do
		if v:IsA("Player") and v ~= Player and v.Character and v.Character.Parent and IsTeamMate(Player, v) then
			table.insert(IgnoreList, v.Character)
		end
	end
	return GetParts(Region, 500, IgnoreList)
end

function ManageMana(Gui)
	local Mana = {}
	if not Gui then
		return
	end
	local Frame = Gui:FindFirstChild("Frame")
	if not Frame then
		return
	end
	local Bar = Frame:FindFirstChild("Bar")
	if not Bar then
		return
	end
	local function AdjustBar()
		local ChargePercent = (GetPercentage(0, 100, CurrentMana.Value) * 0.01)
		local NewMana = Clamp((Frame.AbsoluteSize.X * ChargePercent), 0, Frame.AbsoluteSize.X)
		Bar.Size = (UDim2.new(Bar.Size.X.Scale, 0, Bar.Size.Y.Scale, Bar.Size.Y.Offset) + UDim2.new(0, NewMana, 0, 0))
	end
	for i, v in pairs({ToolUnequipped, ManaAltered}) do
		if v then
			v:disconnect()
		end
	end
	local CurrentlyEquipped = true
	ToolUnequipped = Tool.Unequipped:connect(function()
		CurrentlyEquipped = false
	end)
	ManaAltered = CurrentMana.Changed:connect(function()
		AdjustBar()
	end)
	function Mana:UseMana(Amount)
		CurrentMana.Value = (CurrentMana.Value - Amount)
		if CurrentMana.Value &lt; CurrentMana.MaxValue and not ManaCharging.Value then
			ManaCharging.Value = true
		end
	end
	AdjustBar()
	return Mana
end

function ChargeMana()
	--[[if not ManaCharging.Value then
		return
	end]]
	Spawn(function()
		local ChargeTimeRate = 0.15
		local ChargeRate = 1
		local ChargePercent = 0.005
		while --[[ManaCharging.Value and CurrentMana.Value &lt; CurrentMana.MaxValue]]true do
			wait(ChargeTimeRate)
			--if not InUse.Value then
				CurrentMana.Value = (CurrentMana.Value + ((CurrentMana.MaxValue * ChargePercent) * ChargeRate))
			--end
		end
		--ManaCharging.Value = false
	end)
end

function CreateStaff(CreateNew)
	for i, v in pairs(Tool:GetChildren()) do
		if v:IsA("BasePart") and v ~= Handle then
			v:Destroy()
		end
	end
	Handle.Transparency = ((CreateNew and 1) or 0)
	if not CreateNew then
		return
	end
	Staff = BasePart:Clone()
	Staff.Name = "Staff"
	Staff.Size = Vector3.new(0.5, 6, 0.5)
	Staff.CanCollide = false
	local Mesh = Create("SpecialMesh"){
		Name = "Mesh",
		MeshType = Enum.MeshType.FileMesh,
		MeshId = (BaseUrl .. "276091843"),
		TextureId = (BaseUrl .. "276091966"),
		Scale = Vector3.new(1, 1, 1),
		Parent = Staff,
	}
	GripPiece = Staff:Clone()
	GripPiece.Name = "GripPiece"
	GripPiece.Size = Vector3.new(0.5, 1.5, 0.5)
	GripPiece.Mesh.MeshId = (BaseUrl .. "276091878")
	Orb = Staff:Clone()
	Orb.Name = "Orb"
	Orb.Size = Vector3.new(0.2, 0.2, 0.2)
	Orb.Mesh.MeshId = (BaseUrl .. "276091920")
	local Joints = {
		{Class = "Weld", Parent = Staff, Properties = {Part0 = Handle, Part1 = Staff, C0 = CFrame.new(0, 0, 0), C1 = CFrame.new(0, 0, 0)}},
		{Class = "Weld", Parent = Staff, Properties = {Part0 = Staff, Part1 = GripPiece, C0 = CFrame.new(-0.05, 1.925, -0.0375), C1 = CFrame.new(0, 0, 0)}},
		{Class = "Motor6D", Parent = Staff, Properties = {Part0 = GripPiece, Part1 = Orb, MaxVelocity = 0.05, DesiredAngle = 99999999, C0 = CFrame.new(-0.0225, 0.3, 0.0275), C1 = CFrame.new(0, 0, 0)}},
	}
	for i, v in pairs(Joints) do
		local Joint = Create(v.Class){}
		for ii, vv in pairs(v.Properties) do
			Joint[ii] = vv
		end
		Joint.Parent = v.Parent
	end
	for i, v in pairs({Staff, GripPiece, Orb}) do
		v.Parent = Tool
	end
end

function CheckIfAlive()
	return (((Character and Character.Parent and Humanoid and Humanoid.Parent and Humanoid.Health &gt; 0 and Torso and Torso.Parent and Player and Player.Parent) and true) or false)
end

function Activated()
	if not Tool.Enabled or not ToolEquipped.Value or MouseDown.Value or not CheckIfAlive() or InUse.Value then
		return
	end
	Tool.Enabled = false
	MouseDown.Value = true
	local CurrentlyEquipped = true
	local CurrentlyDown = true
	local ToolUnequipped = Tool.Unequipped:connect(function()
		CurrentlyEquipped = false
	end)
	local MouseButtonUp = MouseDown.Changed:connect(function()
		if not MouseDown.Value then
			CurrentlyDown = false
		end
	end)
	InUse.Value = true
	Sounds.Lightning:Play()
	Delay(0.25, (function()
		for i, v in pairs({ToolUnequipped, MouseButtonUp}) do
			if v then
				v:disconnect()
			end
		end
		if CurrentlyEquipped and CurrentlyDown and CheckIfAlive() then
			Sounds.Strike:Play()
		end
	end))
	local ManaCost = 2.5
	local MaxDuration = 5
	local StartTime = tick()
	local StrikeCount = 0
	local LightningDamage = 10
	local FireRate = 0.1
	local LightningReloadTime = 2
	while CheckIfAlive() and ToolEquipped.Value and MouseDown.Value and Orb.Parent --[[and (tick() - StartTime) &lt;= MaxDuration]] and CurrentMana.Value &gt;= ManaCost do
		StrikeCount = (StrikeCount + 1)
		if StrikeCount &gt; 1 then
			ManaUsage:UseMana(ManaCost)
		end
		Sounds.Strike.Volume = (((math.sin(tick() * 3) + 1) * 0.25) + 0.25)
		local MousePosition = InvokeClient("MousePosition")
		if MousePosition then
			MousePosition = MousePosition.Position
			LightningFunctions.RemoveLightning()
			local RayData = LightningFunctions.Zap({StartPosition = Orb.Position, TargetPosition = MousePosition, Character = Character, Color = "Cyan", Individual = false})
			if RayData then
				local RayHit = RayData.RayHit
				if RayHit then
					local character = RayHit.Parent
					if character == Character then
						return
					end
					if character:IsA("Hat") then
						character = character.Parent
					end
					local humanoid = character:FindFirstChild("Humanoid")
					if humanoid and humanoid.Health &gt; 0 then
						local player = Players:GetPlayerFromCharacter(character)
						if not player or (player and not IsTeamMate(Player, player)) then
							UntagHumanoid(humanoid)
							TagHumanoid(humanoid, Player)
							humanoid:TakeDamage(LightningDamage)
						end
					end
				end
				Spawn(function()
					InvokeClient("SetMouse", {Property = "TargetFilter", Value = RayData.LightningModel})
				end)
			end
		end
		wait(FireRate)
	end
	InUse.Value = false
	Sounds.Strike:Stop()
	if StrikeCount &gt; 1 then
		wait(LightningReloadTime)
	else
		wait(LightningReloadTime / 4)
	end
	Tool.Enabled = true
end

function ResetStuff()
	for i, v in pairs({ManaBarCopy, ManaAltered, ToolUnequipped}) do
		if v then
			if tostring(v) == "Connection" then
				v:disconnect()
			elseif type(v) == "userdata" and v.Parent then
				v:Destroy()
			end
		end
	end
	for i, v in pairs(Sounds) do
		v:Stop()
	end
	for i, v in pairs({InUse, MouseDown}) do
		v.Value = false
	end
end

function Equipped(Mouse)
	Character = Tool.Parent
	Humanoid = Character:FindFirstChild("Humanoid")
	Torso = Character:FindFirstChild("Torso")
	Player = Players:GetPlayerFromCharacter(Character)
	if not CheckIfAlive() then
		return
	end
	Spawn(function()
		EquipTick = tick()
		ResetStuff()
		--[[if CurrentMana.Value &gt;= (CurrentMana.MaxValue * 0.8) then
			CurrentMana.Value = (CurrentMana.MaxValue * 0.8)
		end]]
		CreateStaff(true)
		local PlayerGui = Player:FindFirstChild("PlayerGui")
		if PlayerGui then
			ManaBarCopy = ManaBar:Clone()
			ManaUsage = ManageMana(ManaBarCopy)
			ManaBarCopy.Parent = PlayerGui
		end
	end)
	ToolEquipped.Value = true
end

function Unequipped()
	ResetStuff()
	CreateStaff(false)
	ToolEquipped.Value = false
end

function OnServerInvoke(player, mode, value)
	if player ~= Player or not ToolEquipped.Value or not value or not CheckIfAlive() then
		return
	end
	if mode == "Button1Click" then
		local Down = value.Down
		if not Down and MouseDown.Value then
			MouseDown.Value = false
		end
	elseif mode == "KeyPress" then
		local Key = value.Key
		local Down = value.Down
		if Down and Tool.Enabled and not InUse.Value then
			if Key == "z" then
				local ManaCost = 100
				if CurrentMana.Value &lt; ManaCost or (tick() - EquipTick) &lt; 5 then
					return
				end
				ManaUsage:UseMana(ManaCost)
				Tool.Enabled = false
				InUse.Value = true
				local PlayersNearby = {}
				for i, v in pairs(Players:GetChildren()) do
					if v:IsA("Player") and v ~= Player and not IsTeamMate(Player, v) and v.Character then
						local character = v.Character
						local ForceField = nil
						for i, v in pairs(character:GetChildren()) do
							if v:IsA("ForceField") then
								ForceField = v
								break
							end
						end
						if not ForceField then
							local torso = character:FindFirstChild("Torso")
							table.insert(PlayersNearby, v)
						end
					end
				end
				local ClosestPlayer = {Player = nil, Distance = 40}
				for i, v in pairs(PlayersNearby) do
					local character = v.Character
					local torso = character:FindFirstChild("Torso")
					if torso then
						local DistanceApart = (Torso.Position - torso.Position).Magnitude
						if DistanceApart &lt; ClosestPlayer.Distance then
							ClosestPlayer.Player = character
							ClosestPlayer.Distance = DistanceApart
						end
					end
				end
				if not ClosestPlayer.Player then
					local HumanoidsHit = {}
					local NPCsNearby = {}
					local LightningRadius = ClosestPlayer.Distance
					local LightningRegion = Region3.new((Torso.Position - Vector3.new(LightningRadius, LightningRadius, LightningRadius)), (Torso.Position + Vector3.new(LightningRadius, LightningRadius, LightningRadius)))
					for i, v in pairs(GetNearbyObjects(LightningRegion)) do
						if v and v.Parent then
							local character = v.Parent
							if character ~= Character then
								local humanoid = character:FindFirstChild("Humanoid")
								if humanoid and humanoid.Health &gt; 0 then
									local player = Players:GetPlayerFromCharacter(character)
									if not player then
										if not CheckTableForInstance(HumanoidsHit, humanoid) then
											local ForceField = nil
											for ii, vv in pairs(character:GetChildren()) do
												if vv:IsA("ForceField") then
													ForceField = vv
													break
												end
											end
											if not ForceField then
												table.insert(NPCsNearby, character)
											end
										end
									end
								end
							end
						end
					end
					for i, v in pairs(NPCsNearby) do
						local torso = v:FindFirstChild("Torso")
						if torso then
							local DistanceApart = (Torso.Position - torso.Position).Magnitude
							if DistanceApart &lt; ClosestPlayer.Distance then
								ClosestPlayer.Player = v
								ClosestPlayer.Distance = DistanceApart
							end
						end
					end
				end
				if ClosestPlayer.Player then
					local character = ClosestPlayer.Player
					local humanoid = character:FindFirstChild("Humanoid")
					local torso = character:FindFirstChild("Torso")
					if humanoid and humanoid.Health &gt; 0 and torso then
						local StartPosition = (CFrame.new(torso.Position) * CFrame.new(0, 50, 0))
						local TargetPosition = (StartPosition + Vector3.new(0, -1, 0) * 75)
						local RayData = LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 2, TimeToFade = 1, MaxRange = 150, SegmentLength = 5, Ignore = {character}})
						for i = 1, 4 do
							Spawn(function()
								LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 2, TimeToFade = 1, MaxRange = 150, SegmentLength = 5, Ignore = {character}})
							end)
						end
						if RayData then
							local RayPos = RayData.RayPos
							local SoundPart = BasePart:Clone()
							SoundPart.Name = "Effect"
							SoundPart.Transparency = 1
							SoundPart.CanCollide = false
							local Sound = Sounds.Lightning2:Clone()
							Sound.Parent = SoundPart
							Debris:AddItem(SoundPart, 2)
							SoundPart.Parent = game:GetService("Workspace")
							SoundPart.CFrame = CFrame.new(RayPos)
							Sound:Play()
							wait(0.1)
							for i = 1, math.random(10, 15) do
								local StartPosition = (CFrame.new(RayData.RayPos) * CFrame.new(0, 0, 0))
								local TargetPosition = (StartPosition + Vector3.new((math.random(-360, 360) * 0.01), 1, (math.random(-360, 360) * 0.01)) * 2)
								local Spark = LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 1.9, TimeToFade = 0.9, MaxRange = (math.random(800, 1500) * 0.01), SegmentLength = (math.random(200, 1000) * 0.001), Ignore = {character}})
							end
						end
						TakeDamage(humanoid, 100)
					end
				end
				InUse.Value = false
				Tool.Enabled = true
			end
			if Key == "x" then
				local ManaCost = 25
				if CurrentMana.Value &lt; ManaCost then
					return
				end
				ManaUsage:UseMana(ManaCost)
				Tool.Enabled = false
				InUse.Value = true
				Sounds.Zap:Play()
				local Animation = Animations.Spin
				Spawn(function()
					InvokeClient("StopAnimation", Animation)
					InvokeClient("PlayAnimation", Animation)
				end)
				Spawn(function()
					local Animation = Animations.ArmsUp
					InvokeClient("StopAnimation", Animation)
					InvokeClient("PlayAnimation", {Animation = Animation.Animation, FadeTime = Animation.FadeTime, Weight = Animation.Weight, Speed = 1.5})
				end)
				Spawn(function()
					local WaitTime = (Animation.Duration / 10)
					for i = 1, 10 do
						if not ToolEquipped or not CheckIfAlive() then
							return
						end
						local StartPosition = (Orb.CFrame * CFrame.new(0, 0, 0))
						local TargetPosition = (StartPosition * CFrame.new((math.random(-100, 100) * 0.01), 0, (math.random(-500, 500) * 0.01)))
						local RayData = LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 2.5, MaxRange = 2, SegmentLength = 0.5})
						wait(WaitTime)
					end
				end)
				local HumanoidsHit = {}
				local LightningRadius = 6
				local LightningRegion = Region3.new((Torso.Position - Vector3.new(LightningRadius, LightningRadius, LightningRadius)), (Torso.Position + Vector3.new(LightningRadius, LightningRadius, LightningRadius)))
				for i, v in pairs(GetNearbyObjects(LightningRegion)) do
					if v and v.Parent then
						local character = v.Parent
						if character ~= Character then
							local humanoid = character:FindFirstChild("Humanoid")
							if humanoid and humanoid.Health &gt; 0 then
								local player = Players:GetPlayerFromCharacter(character)
								if not player or (player and not IsTeamMate(Player, player)) then
									if not CheckTableForInstance(HumanoidsHit, humanoid) then
										local ForceField = nil
										for ii, vv in pairs(character:GetChildren()) do
											if vv:IsA("ForceField") then
												ForceField = vv
												break
											end
										end
										if not ForceField then
											table.insert(HumanoidsHit, humanoid)
											TakeDamage(humanoid, 10)
											local torso = character:FindFirstChild("Torso")
											if torso then
												humanoid.Sit = true
												torso.Velocity = (CFrame.new(Torso.Position, torso.Position).lookVector * 50)
											end
										end
									end
								end
							end
						end
					end
				end
				InUse.Value = false
				Tool.Enabled = true
			elseif Key == "q" then
				local ManaCost = 50
				if CurrentMana.Value &lt; ManaCost then
					return
				end
				Spawn(function()
					InvokeClient("DisableMobility", {Disabled = true})
				end)
				local SpellDuration = 1
				ManaUsage:UseMana(ManaCost)
				Tool.Enabled = false
				InUse.Value = true
				local Animation = Animations.Blast
				Spawn(function()
					InvokeClient("StopAnimation", Animation)
					InvokeClient("PlayAnimation", Animation)
				end)
				wait(Animation.Duration)
				local TorsoCFrame = Torso.CFrame
				local StartPoint = (TorsoCFrame + TorsoCFrame.lookVector * -10)
				local DesiredPoint = (StartPoint + StartPoint.lookVector * 3)
				local Direction = CFrame.new(StartPoint.p, Vector3.new(DesiredPoint.X, StartPoint.Y, DesiredPoint.Z)).lookVector
				Spawn(function()
					local HumanoidsHit = {}
					local LightningRadius = 6
					for i = 1, 10 do
						if not ToolEquipped or not CheckIfAlive() then
							return
						end
						Spawn(function()
							local StartPosition = ((StartPoint * CFrame.new(0, 75, 0)) + Direction * i * 5)
							local TargetPosition = (StartPosition + Vector3.new(0, -1, 0) * 2)
							local RayData = LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 2.5, TimeToFade = 1.5, MaxRange = 150, SegmentLength = 5})
							if RayData then
								local RayPos = RayData.RayPos
								local SoundPart = BasePart:Clone()
								SoundPart.Name = "Effect"
								SoundPart.Transparency = 1
								SoundPart.CanCollide = false
								local Sound = Sounds.Lightning:Clone()
								Sound.Parent = SoundPart
								Debris:AddItem(SoundPart, 2)
								SoundPart.Parent = game:GetService("Workspace")
								SoundPart.CFrame = CFrame.new(RayPos)
								Sound:Play()
								local LightningRegion = Region3.new((RayPos - Vector3.new(LightningRadius, LightningRadius, LightningRadius)), (RayPos + Vector3.new(LightningRadius, LightningRadius, LightningRadius)))
								for i, v in pairs(GetNearbyObjects(LightningRegion)) do
									if v and v.Parent then
										local character = v.Parent
										if character ~= Character then
											local humanoid = character:FindFirstChild("Humanoid")
											if humanoid and humanoid.Health &gt; 0 then
												local player = Players:GetPlayerFromCharacter(character)
												if not player or (player and not IsTeamMate(Player, player)) then
													if not CheckTableForInstance(HumanoidsHit, humanoid) then
														local ForceField = nil
														for ii, vv in pairs(character:GetChildren()) do
															if vv:IsA("ForceField") then
																ForceField = vv
																break
															end
														end
														if not ForceField then
															table.insert(HumanoidsHit, humanoid)
															TakeDamage(humanoid, 40)
															local torso = character:FindFirstChild("Torso")
															if torso then
																humanoid.Sit = true
																torso.Velocity = (CFrame.new(Torso.Position, torso.Position).lookVector * 10)
															end
														end
													end
												end
											end
										end
									end
								end
							end
						end)
						wait(0.05)
					end
				end)
				wait(SpellDuration)
				Spawn(function()
					InvokeClient("StopAnimation", Animation)
				end)
				Spawn(function()
					InvokeClient("DisableMobility", {Disabled = false})
				end)
				InUse.Value = false
				Tool.Enabled = true
			elseif Key == "e" then
				local ManaCost = 75
				if CurrentMana.Value &lt; ManaCost then
					return
				end
				Tool.Enabled = false
				InUse.Value = true
				ManaUsage:UseMana(ManaCost)
				local Animation = Animations.ArmsUp
				Spawn(function()
					InvokeClient("StopAnimation", Animation)
					InvokeClient("PlayAnimation", Animation)
				end)
				local LightningStrikeDamage = 40
				local MaxLightningStrikeDamage = 70
				local Strikes = {
					{NumberOfStrikes = 16, Radius = 14},
					{NumberOfStrikes = 8, Radius = 8},
					{NumberOfStrikes = 5, Radius = 5},
				}
				local HumanoidsHit = {}
				local LightningRadius = Strikes[1].Radius
				local LightningRegion = Region3.new((Torso.Position - Vector3.new(LightningRadius, LightningRadius, LightningRadius)), (Torso.Position + Vector3.new(LightningRadius, LightningRadius, LightningRadius)))
				local function DamageHumanoid(character)
					local HumanoidFound = false
					local DeterminedDamage = 0
					local humanoid = character:FindFirstChild("Humanoid")
					if not humanoid or humanoid.Health == 0 then
						return
					end
					for i, v in pairs(character:GetChildren()) do
						if v:IsA("ForceField") then
							return
						end
					end
					for i, v in pairs(HumanoidsHit) do
						if v and v.Humanoid == humanoid then
							HumanoidFound = true
							if v.DamageDealt &lt; MaxLightningStrikeDamage then
								DeterminedDamage = (((v.DamageDealt + LightningStrikeDamage) &lt;= MaxLightningStrikeDamage and LightningStrikeDamage) or (MaxLightningStrikeDamage - v.DamageDealt))
								v.DamageDealt = (v.DamageDealt + DeterminedDamage)
							end
							break
						end
					end
					if not HumanoidFound then
						table.insert(HumanoidsHit, {Humanoid = humanoid, DamageDealt = DeterminedDamage})
					end
					TakeDamage(humanoid, DeterminedDamage)
					humanoid.Sit = true
				end
				for i, v in pairs(GetNearbyObjects(LightningRegion)) do
					if v and v.Parent then
						local character = v.Parent
						if character ~= Character then
							local humanoid = character:FindFirstChild("Humanoid")
							if humanoid and humanoid.Health &gt; 0 then
								local player = Players:GetPlayerFromCharacter(character)
								if not player or (player and not IsTeamMate(Player, player)) then
									DamageHumanoid(character)
								end
							end
						end
					end
				end
				for i, v in pairs(Strikes) do
					local LightningPoints = MakeCircle((CFrame.new(Torso.Position) * CFrame.Angles(0, 0, 0)), v.Radius, v.NumberOfStrikes)
					for ii, vv in pairs(LightningPoints:GetChildren()) do
						if vv:IsA("BasePart") then
							Spawn(function()
								local StartPosition = (CFrame.new(vv.Position) * CFrame.new(0, 50, 0))
								local TargetPosition = (StartPosition + Vector3.new(0, -1, 0) * 75)
								local RayData = LightningFunctions.Zap({StartPosition = StartPosition.p, TargetPosition = TargetPosition.p, Character = Character, Color = "Cyan", Individual = true, Duration = 2.5, MaxRange = 150, SegmentLength = 5})
								if RayData then
									local RayPos = RayData.RayPos
									local SoundPart = BasePart:Clone()
									SoundPart.Name = "Effect"
									SoundPart.Transparency = 1
									SoundPart.CanCollide = false
									local Sound = Sounds.Lightning:Clone()
									Sound.Parent = SoundPart
									Debris:AddItem(SoundPart, 2)
									SoundPart.Parent = game:GetService("Workspace")
									SoundPart.CFrame = CFrame.new(RayPos)
									Sound:Play()
									local RayHit = RayData.RayHit
									if RayHit then
										local character = RayHit.Parent
										if character ~= Character then
											if character:IsA("Hat") then
												character = character.Parent
											end
											local humanoid = character:FindFirstChild("Humanoid")
											if humanoid and humanoid.Health &gt; 0 then
												local player = Players:GetPlayerFromCharacter(character)
												if not player or (player and not IsTeamMate(Player, player)) then
													DamageHumanoid(character)
												end
											end
										end
									end
								end
							end)
						end
					end
					InUse.Value = false
					Tool.Enabled = true
				end
			end
		end
	end
end

function InvokeClient(Mode, Value)
	local ClientReturn = nil
	pcall(function()
		ClientReturn = ClientControl:InvokeClient(Player, Mode, Value)
	end)
	return ClientReturn
end

--[[ManaCharging.Changed:connect(function()
	ChargeMana()
end)
ManaCharging.Value = true]]
ChargeMana()

CreateStaff(false)

ServerControl.OnServerInvoke = OnServerInvoke

Tool.Activated:connect(Activated)
Tool.Equipped:connect(Equipped)
Tool.Unequipped:connect(Unequipped)</ProtectedString>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
					</Properties>
					<Item class="ScreenGui" referent="RBXC3C93616BFE74BCB96A9FFB5385D7EB5">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<bool name="AutoLocalize">true</bool>
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="ClipToDeviceSafeArea">true</bool>
							<bool name="DefinesCapabilities">false</bool>
							<int name="DisplayOrder">0</int>
							<bool name="Enabled">true</bool>
							<string name="Name">ManaBar</string>
							<bool name="ResetOnSpawn">true</bool>
							<Ref name="RootLocalizationTable">null</Ref>
							<token name="SafeAreaCompatibility">1</token>
							<token name="ScreenInsets">2</token>
							<token name="SelectionBehaviorDown">0</token>
							<token name="SelectionBehaviorLeft">0</token>
							<token name="SelectionBehaviorRight">0</token>
							<token name="SelectionBehaviorUp">0</token>
							<bool name="SelectionGroup">false</bool>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
							<token name="ZIndexBehavior">0</token>
						</Properties>
						<Item class="Frame" referent="RBXC79962FEC6514F78842A2592909306F1">
							<Properties>
								<bool name="Active">false</bool>
								<Vector2 name="AnchorPoint">
									<X>0</X>
									<Y>0</Y>
								</Vector2>
								<BinaryString name="AttributesSerialize" />
								<bool name="AutoLocalize">true</bool>
								<token name="AutomaticSize">0</token>
								<Color3 name="BackgroundColor3">
									<R>1</R>
									<G>1</G>
									<B>1</B>
								</Color3>
								<float name="BackgroundTransparency">0</float>
								<Color3 name="BorderColor3">
									<R>0</R>
									<G>0.666666687</G>
									<B>1</B>
								</Color3>
								<token name="BorderMode">0</token>
								<int name="BorderSizePixel">0</int>
								<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
								<bool name="ClipsDescendants">true</bool>
								<bool name="DefinesCapabilities">false</bool>
								<bool name="Draggable">false</bool>
								<bool name="Interactable">true</bool>
								<int name="LayoutOrder">0</int>
								<string name="Name">Frame</string>
								<Ref name="NextSelectionDown">null</Ref>
								<Ref name="NextSelectionLeft">null</Ref>
								<Ref name="NextSelectionRight">null</Ref>
								<Ref name="NextSelectionUp">null</Ref>
								<UDim2 name="Position">
									<XS>0.5</XS>
									<XO>-150</XO>
									<YS>0.75</YS>
									<YO>0</YO>
								</UDim2>
								<Ref name="RootLocalizationTable">null</Ref>
								<float name="Rotation">0</float>
								<bool name="Selectable">false</bool>
								<token name="SelectionBehaviorDown">0</token>
								<token name="SelectionBehaviorLeft">0</token>
								<token name="SelectionBehaviorRight">0</token>
								<token name="SelectionBehaviorUp">0</token>
								<bool name="SelectionGroup">false</bool>
								<Ref name="SelectionImageObject">null</Ref>
								<int name="SelectionOrder">0</int>
								<UDim2 name="Size">
									<XS>0</XS>
									<XO>300</XO>
									<YS>0</YS>
									<YO>40</YO>
								</UDim2>
								<token name="SizeConstraint">0</token>
								<int64 name="SourceAssetId">-1</int64>
								<token name="Style">0</token>
								<BinaryString name="Tags" />
								<bool name="Visible">true</bool>
								<int name="ZIndex">1</int>
							</Properties>
							<Item class="Frame" referent="RBX447D5F6A94524360B59824816F144C5C">
								<Properties>
									<bool name="Active">false</bool>
									<Vector2 name="AnchorPoint">
										<X>0</X>
										<Y>0</Y>
									</Vector2>
									<BinaryString name="AttributesSerialize" />
									<bool name="AutoLocalize">true</bool>
									<token name="AutomaticSize">0</token>
									<Color3 name="BackgroundColor3">
										<R>0</R>
										<G>0.392156899</G>
										<B>1</B>
									</Color3>
									<float name="BackgroundTransparency">0</float>
									<Color3 name="BorderColor3">
										<R>0</R>
										<G>0.666666687</G>
										<B>1</B>
									</Color3>
									<token name="BorderMode">0</token>
									<int name="BorderSizePixel">0</int>
									<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
									<bool name="ClipsDescendants">false</bool>
									<bool name="DefinesCapabilities">false</bool>
									<bool name="Draggable">false</bool>
									<bool name="Interactable">true</bool>
									<int name="LayoutOrder">0</int>
									<string name="Name">Frame</string>
									<Ref name="NextSelectionDown">null</Ref>
									<Ref name="NextSelectionLeft">null</Ref>
									<Ref name="NextSelectionRight">null</Ref>
									<Ref name="NextSelectionUp">null</Ref>
									<UDim2 name="Position">
										<XS>0</XS>
										<XO>0</XO>
										<YS>0</YS>
										<YO>0</YO>
									</UDim2>
									<Ref name="RootLocalizationTable">null</Ref>
									<float name="Rotation">0</float>
									<bool name="Selectable">false</bool>
									<token name="SelectionBehaviorDown">0</token>
									<token name="SelectionBehaviorLeft">0</token>
									<token name="SelectionBehaviorRight">0</token>
									<token name="SelectionBehaviorUp">0</token>
									<bool name="SelectionGroup">false</bool>
									<Ref name="SelectionImageObject">null</Ref>
									<int name="SelectionOrder">0</int>
									<UDim2 name="Size">
										<XS>1</XS>
										<XO>0</XO>
										<YS>1</YS>
										<YO>0</YO>
									</UDim2>
									<token name="SizeConstraint">0</token>
									<int64 name="SourceAssetId">-1</int64>
									<token name="Style">0</token>
									<BinaryString name="Tags" />
									<bool name="Visible">true</bool>
									<int name="ZIndex">2</int>
								</Properties>
								<Item class="Frame" referent="RBX8BF7BA6AB26142CD97346F6D43882AE7">
									<Properties>
										<bool name="Active">false</bool>
										<Vector2 name="AnchorPoint">
											<X>0</X>
											<Y>0</Y>
										</Vector2>
										<BinaryString name="AttributesSerialize" />
										<bool name="AutoLocalize">true</bool>
										<token name="AutomaticSize">0</token>
										<Color3 name="BackgroundColor3">
											<R>0.784313798</R>
											<G>0.784313798</G>
											<B>0.784313798</B>
										</Color3>
										<float name="BackgroundTransparency">0</float>
										<Color3 name="BorderColor3">
											<R>0</R>
											<G>0.392156899</G>
											<B>1</B>
										</Color3>
										<token name="BorderMode">0</token>
										<int name="BorderSizePixel">0</int>
										<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
										<bool name="ClipsDescendants">false</bool>
										<bool name="DefinesCapabilities">false</bool>
										<bool name="Draggable">false</bool>
										<bool name="Interactable">true</bool>
										<int name="LayoutOrder">0</int>
										<string name="Name">Divider</string>
										<Ref name="NextSelectionDown">null</Ref>
										<Ref name="NextSelectionLeft">null</Ref>
										<Ref name="NextSelectionRight">null</Ref>
										<Ref name="NextSelectionUp">null</Ref>
										<UDim2 name="Position">
											<XS>0.333299994</XS>
											<XO>0</XO>
											<YS>0</YS>
											<YO>0</YO>
										</UDim2>
										<Ref name="RootLocalizationTable">null</Ref>
										<float name="Rotation">0</float>
										<bool name="Selectable">false</bool>
										<token name="SelectionBehaviorDown">0</token>
										<token name="SelectionBehaviorLeft">0</token>
										<token name="SelectionBehaviorRight">0</token>
										<token name="SelectionBehaviorUp">0</token>
										<bool name="SelectionGroup">false</bool>
										<Ref name="SelectionImageObject">null</Ref>
										<int name="SelectionOrder">0</int>
										<UDim2 name="Size">
											<XS>0</XS>
											<XO>2</XO>
											<YS>1</YS>
											<YO>0</YO>
										</UDim2>
										<token name="SizeConstraint">0</token>
										<int64 name="SourceAssetId">-1</int64>
										<token name="Style">0</token>
										<BinaryString name="Tags" />
										<bool name="Visible">true</bool>
										<int name="ZIndex">4</int>
									</Properties>
								</Item>
								<Item class="Frame" referent="RBX7610AD11C87B41D996B6EB6382F5E819">
									<Properties>
										<bool name="Active">false</bool>
										<Vector2 name="AnchorPoint">
											<X>0</X>
											<Y>0</Y>
										</Vector2>
										<BinaryString name="AttributesSerialize" />
										<bool name="AutoLocalize">true</bool>
										<token name="AutomaticSize">0</token>
										<Color3 name="BackgroundColor3">
											<R>0.784313798</R>
											<G>0.784313798</G>
											<B>0.784313798</B>
										</Color3>
										<float name="BackgroundTransparency">0</float>
										<Color3 name="BorderColor3">
											<R>0</R>
											<G>0.392156899</G>
											<B>1</B>
										</Color3>
										<token name="BorderMode">0</token>
										<int name="BorderSizePixel">0</int>
										<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
										<bool name="ClipsDescendants">false</bool>
										<bool name="DefinesCapabilities">false</bool>
										<bool name="Draggable">false</bool>
										<bool name="Interactable">true</bool>
										<int name="LayoutOrder">0</int>
										<string name="Name">Divider</string>
										<Ref name="NextSelectionDown">null</Ref>
										<Ref name="NextSelectionLeft">null</Ref>
										<Ref name="NextSelectionRight">null</Ref>
										<Ref name="NextSelectionUp">null</Ref>
										<UDim2 name="Position">
											<XS>0.666000009</XS>
											<XO>0</XO>
											<YS>0</YS>
											<YO>0</YO>
										</UDim2>
										<Ref name="RootLocalizationTable">null</Ref>
										<float name="Rotation">0</float>
										<bool name="Selectable">false</bool>
										<token name="SelectionBehaviorDown">0</token>
										<token name="SelectionBehaviorLeft">0</token>
										<token name="SelectionBehaviorRight">0</token>
										<token name="SelectionBehaviorUp">0</token>
										<bool name="SelectionGroup">false</bool>
										<Ref name="SelectionImageObject">null</Ref>
										<int name="SelectionOrder">0</int>
										<UDim2 name="Size">
											<XS>0</XS>
											<XO>2</XO>
											<YS>1</YS>
											<YO>0</YO>
										</UDim2>
										<token name="SizeConstraint">0</token>
										<int64 name="SourceAssetId">-1</int64>
										<token name="Style">0</token>
										<BinaryString name="Tags" />
										<bool name="Visible">true</bool>
										<int name="ZIndex">4</int>
									</Properties>
								</Item>
							</Item>
							<Item class="Frame" referent="RBX1B20A1AA9C82433881983EEE3BC178F3">
								<Properties>
									<bool name="Active">false</bool>
									<Vector2 name="AnchorPoint">
										<X>0</X>
										<Y>0</Y>
									</Vector2>
									<BinaryString name="AttributesSerialize" />
									<bool name="AutoLocalize">true</bool>
									<token name="AutomaticSize">0</token>
									<Color3 name="BackgroundColor3">
										<R>0</R>
										<G>0.666666687</G>
										<B>1</B>
									</Color3>
									<float name="BackgroundTransparency">0</float>
									<Color3 name="BorderColor3">
										<R>0</R>
										<G>0.666666687</G>
										<B>1</B>
									</Color3>
									<token name="BorderMode">0</token>
									<int name="BorderSizePixel">0</int>
									<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
									<bool name="ClipsDescendants">false</bool>
									<bool name="DefinesCapabilities">false</bool>
									<bool name="Draggable">false</bool>
									<bool name="Interactable">true</bool>
									<int name="LayoutOrder">0</int>
									<string name="Name">Bar</string>
									<Ref name="NextSelectionDown">null</Ref>
									<Ref name="NextSelectionLeft">null</Ref>
									<Ref name="NextSelectionRight">null</Ref>
									<Ref name="NextSelectionUp">null</Ref>
									<UDim2 name="Position">
										<XS>0</XS>
										<XO>0</XO>
										<YS>0</YS>
										<YO>0</YO>
									</UDim2>
									<Ref name="RootLocalizationTable">null</Ref>
									<float name="Rotation">0</float>
									<bool name="Selectable">true</bool>
									<token name="SelectionBehaviorDown">0</token>
									<token name="SelectionBehaviorLeft">0</token>
									<token name="SelectionBehaviorRight">0</token>
									<token name="SelectionBehaviorUp">0</token>
									<bool name="SelectionGroup">false</bool>
									<Ref name="SelectionImageObject">null</Ref>
									<int name="SelectionOrder">0</int>
									<UDim2 name="Size">
										<XS>0</XS>
										<XO>0</XO>
										<YS>1</YS>
										<YO>0</YO>
									</UDim2>
									<token name="SizeConstraint">0</token>
									<int64 name="SourceAssetId">-1</int64>
									<token name="Style">0</token>
									<BinaryString name="Tags" />
									<bool name="Visible">true</bool>
									<int name="ZIndex">3</int>
								</Properties>
							</Item>
							<Item class="TextLabel" referent="RBX19B366E9424D4ADFA84F197FFA15513B">
								<Properties>
									<bool name="Active">false</bool>
									<Vector2 name="AnchorPoint">
										<X>0</X>
										<Y>0</Y>
									</Vector2>
									<BinaryString name="AttributesSerialize" />
									<bool name="AutoLocalize">true</bool>
									<token name="AutomaticSize">0</token>
									<Color3 name="BackgroundColor3">
										<R>1</R>
										<G>1</G>
										<B>1</B>
									</Color3>
									<float name="BackgroundTransparency">1</float>
									<Color3 name="BorderColor3">
										<R>0.105882362</R>
										<G>0.164705887</G>
										<B>0.207843155</B>
									</Color3>
									<token name="BorderMode">0</token>
									<int name="BorderSizePixel">1</int>
									<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
									<bool name="ClipsDescendants">false</bool>
									<bool name="DefinesCapabilities">false</bool>
									<bool name="Draggable">false</bool>
									<Font name="FontFace">
										<Family><url>rbxasset://fonts/families/LegacyArial.json</url></Family>
										<Weight>400</Weight>
										<Style>Normal</Style>
										<CachedFaceId><url>rbxasset://fonts/Arimo-Regular.ttf</url></CachedFaceId>
									</Font>
									<bool name="Interactable">true</bool>
									<int name="LayoutOrder">0</int>
									<float name="LineHeight">1</float>
									<string name="LocalizationMatchIdentifier" />
									<string name="LocalizationMatchedSourceText" />
									<int name="MaxVisibleGraphemes">-1</int>
									<string name="Name">TextLabel</string>
									<Ref name="NextSelectionDown">null</Ref>
									<Ref name="NextSelectionLeft">null</Ref>
									<Ref name="NextSelectionRight">null</Ref>
									<Ref name="NextSelectionUp">null</Ref>
									<string name="OpenTypeFeatures" />
									<UDim2 name="Position">
										<XS>0</XS>
										<XO>0</XO>
										<YS>0</YS>
										<YO>0</YO>
									</UDim2>
									<bool name="RichText">false</bool>
									<Ref name="RootLocalizationTable">null</Ref>
									<float name="Rotation">0</float>
									<bool name="Selectable">false</bool>
									<token name="SelectionBehaviorDown">0</token>
									<token name="SelectionBehaviorLeft">0</token>
									<token name="SelectionBehaviorRight">0</token>
									<token name="SelectionBehaviorUp">0</token>
									<bool name="SelectionGroup">false</bool>
									<Ref name="SelectionImageObject">null</Ref>
									<int name="SelectionOrder">0</int>
									<UDim2 name="Size">
										<XS>1</XS>
										<XO>0</XO>
										<YS>1</YS>
										<YO>0</YO>
									</UDim2>
									<token name="SizeConstraint">0</token>
									<int64 name="SourceAssetId">-1</int64>
									<BinaryString name="Tags" />
									<string name="Text">Mana</string>
									<Color3 name="TextColor3">
										<R>1</R>
										<G>1</G>
										<B>1</B>
									</Color3>
									<token name="TextDirection">0</token>
									<bool name="TextScaled">false</bool>
									<float name="TextSize">14</float>
									<Color3 name="TextStrokeColor3">
										<R>1</R>
										<G>1</G>
										<B>1</B>
									</Color3>
									<float name="TextStrokeTransparency">0.899999976</float>
									<float name="TextTransparency">0</float>
									<token name="TextTruncate">0</token>
									<bool name="TextWrapped">false</bool>
									<token name="TextXAlignment">0</token>
									<token name="TextYAlignment">1</token>
									<bool name="Visible">true</bool>
									<int name="ZIndex">5</int>
								</Properties>
							</Item>
						</Item>
					</Item>
					<Item class="ModuleScript" referent="RBX0AD0390FA4294D349BA903566F703778">
						<Properties>
							<BinaryString name="AttributesSerialize" />
							<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
							<bool name="DefinesCapabilities">false</bool>
							<Content name="LinkedSource"><null /></Content>
							<string name="Name">LightningFunctions</string>
							<string name="ScriptGuid">{FE1D0774-27D5-4FD0-BAF4-6FF8CAB4AB4C}</string>
							<ProtectedString name="Source">--Made by Luckymaxer

Players = game:GetService("Players")
Debris = game:GetService("Debris")
RunService = game:GetService("RunService")

RbxUtility = LoadLibrary("RbxUtility")
Create = RbxUtility.Create

LightningModelRemoval = script:WaitForChild("LightningModelRemoval")

BasePart = Create("Part"){
	Material = Enum.Material.Plastic,
	Shape = Enum.PartType.Block,
	TopSurface = Enum.SurfaceType.Smooth,
	BottomSurface = Enum.SurfaceType.Smooth,
	FormFactor = Enum.FormFactor.Custom,
	Size = Vector3.new(0.2, 0.2, 0.2),
	CanCollide = true,
	Locked = true,
}

BaseLightning = BasePart:Clone()
BaseLightning.Name = "Effect"
BaseLightning.Transparency = 0.1
BaseLightning.Material = Enum.Material.Neon
BaseLightning.Anchored = true
BaseLightning.CanCollide = false

Rate = 0.05

LightningBolts = {}
LastBolt = nil

function GetLightningModel()
	local LightningModelName = "LightningModel"
	local LightningModel = game:GetService("Workspace"):FindFirstChild(LightningModelName)
	if not LightningModel then
		LightningModel = Create("Model"){
			Name = LightningModelName,
		}
		local LightningModelRemovalClone = LightningModelRemoval:Clone()
		LightningModelRemovalClone.Disabled = false
		LightningModelRemovalClone.Parent = LightningModel
		LightningModel.Parent = game:GetService("Workspace")
	end
	return LightningModel
end

function CheckTableForString(Table, String)
	for i, v in pairs(Table) do
		if string.find(string.lower(String), string.lower(v)) then
			return true
		end
	end
	return false
end

function CheckIntangible(Hit)
	local ProjectileNames = {"Water", "Arrow", "Projectile", "Effect", "Rail", "Lightning", "Bullet"}
	if Hit and Hit.Parent then
		if ((not Hit.CanCollide or CheckTableForString(ProjectileNames, Hit.Name)) and not Hit.Parent:FindFirstChild("Humanoid")) then
			return true
		end
	end
	return false
end

function CastRay(StartPos, Vec, Length, Ignore, DelayIfHit)
	local Ignore = ((type(Ignore) == "table" and Ignore) or {Ignore})
	local RayHit, RayPos, RayNormal = game:GetService("Workspace"):FindPartOnRayWithIgnoreList(Ray.new(StartPos, Vec * Length), Ignore)
	if RayHit and CheckIntangible(RayHit) then
		if DelayIfHit then
			wait()
		end
		RayHit, RayPos, RayNormal = CastRay((RayPos + (Vec * 0.01)), Vec, (Length - ((StartPos - RayPos).magnitude)), Ignore, DelayIfHit)
	end
	return RayHit, RayPos, RayNormal
end

function Zap(Table)
	local StartPos, TargetPos, Character, Color = Table.StartPosition, Table.TargetPosition, Table.Character, Table.Color
	local Duration = (Table.Duration or 2)
	local FadeRate = (Table.FadeRate or 0.05)
	local Individualize = (Table.Individualize or false)
	local MaxRange = (Table.MaxRange or 40)
	local SegmentLength = (Table.SegmentLength or 5)
	local TimeToFade = (Table.TimeToFade or 0.5)
	local Ignore = (Table.Ignore or {})
	if not StartPos or not TargetPos or not Character then
		return
	end
	local LightningModel = GetLightningModel()
	for i, v in pairs({Character, LightningModel}) do
		table.insert(Ignore, v)
	end
	local LastPos = StartPos
	local Direction = CFrame.new(StartPos, TargetPos).lookVector
	local RayHit, RayPos, RayNormal = CastRay(StartPos, Direction, MaxRange, Ignore, false)
	local RayLength = (StartPos - RayPos).Magnitude
	local Struck = false
	local TotalSegments = math.ceil(RayLength / SegmentLength)
	Direction = CFrame.new(StartPos, RayPos).lookVector
	local LightningBolt = Create("Model"){
		Name = "LightningBolt",
	}
	if not Individualize then
		table.insert(LightningBolts, LightningBolt)
	end
	LastBolt = LightningBolt
	Debris:AddItem(LightningBolt, Duration)
	LightningBolt.Parent = LightningModel
	for i = 1, TotalSegments do
		if not Struck then
			local Entropy = Vector3.new(((math.random() * 2) - 1), ((math.random() * 2) - 1), ((math.random() * 2) - 1))
			local NewPos = (StartPos + (Direction * (RayLength * (i / TotalSegments))) + Entropy)
			local SegmentVec = (NewPos - LastPos)
			local RayHit, RayPos, RayNormal = CastRay(LastPos, SegmentVec.Unit, SegmentVec.Magnitude, {Character, LightningModel}, false)
			local RayVec = (LastPos - RayPos)
			local LightningPart = BaseLightning:Clone()
			LightningPart.BrickColor = BrickColor.new(Color)
			LightningPart.Size = Vector3.new(0.4, 0.4, RayVec.Magnitude)
			LightningPart.CFrame = (CFrame.new(LastPos, RayPos) * CFrame.new(0, 0, -(RayVec.Magnitude / 2)))
			Debris:AddItem(LightningPart, (Duration - 0.5))
			local Light = Create("PointLight"){
				Name = "Light",
				Color = BrickColor.new(Color).Color,
				Brightness = 50,
				Range = 2,
				Shadows = false,
				Enabled = true,
				Parent = LightningPart,
			}
			--Make circular
			local CylinderMesh = Create("CylinderMesh"){
				Name = "Mesh",
				Parent = LightningPart,
			}
			local OrigCF = LightningPart.CFrame
			LightningPart.Size = Vector3.new(LightningPart.Size.X, LightningPart.Size.Z, LightningPart.Size.Y)
			LightningPart.CFrame = (OrigCF * CFrame.Angles((math.pi / 2), 0, 0))
			LightningPart.Parent = LightningBolt
			LastPos = NewPos
			Spawn(function()
				local FadeRate = 0.05
				local OrigTransparency = LightningPart.Transparency
				for i = 1, (TimeToFade / FadeRate) do
					wait(FadeRate)
					LightningPart.Transparency = (OrigTransparency + (i / (TimeToFade / FadeRate)))
				end
			end)
		end
	end
	return {RayHit = RayHit, RayPos = RayPos, RayNormal = RayNormal, LightningModel = LightningModel}
end

function RemoveLightning()
	for i, v in pairs(LightningBolts) do
		if v and v.Parent then
			v:Destroy()
		end
	end
	LightningBolts = {}
end

Functions = {
	Zap = Zap,
	RemoveLightning = RemoveLightning,
}

return Functions</ProtectedString>
							<int64 name="SourceAssetId">-1</int64>
							<BinaryString name="Tags" />
						</Properties>
						<Item class="Script" referent="RBX80B5CF787E1E4E1184257A229CE99974">
							<Properties>
								<BinaryString name="AttributesSerialize" />
								<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
								<bool name="DefinesCapabilities">false</bool>
								<bool name="Disabled">true</bool>
								<Content name="LinkedSource"><null /></Content>
								<string name="Name">LightningModelRemoval</string>
								<token name="RunContext">0</token>
								<string name="ScriptGuid">{CA73518C-5FCD-4284-B89B-D31BB3118AE2}</string>
								<ProtectedString name="Source">--Made by Luckymaxer

Model = script.Parent

Debris = game:GetService("Debris")

FadeRate = 0.025
Rate = (1 / 15)

Removing = false

function RemoveModel()
	if Removing then
		return
	end
	local Parts = {}
	for i, v in pairs(Model:GetChildren()) do
		if v:IsA("Model") then
			table.insert(Parts, v)
		end
	end
	if #Parts == 0 then
		Removing = true
		Model.Name = ""
		Debris:AddItem(Model, 0.5)
	end
end

Model.ChildRemoved:connect(function(Child)
	RemoveModel()
end)

wait(1.5)

RemoveModel()</ProtectedString>
								<int64 name="SourceAssetId">-1</int64>
								<BinaryString name="Tags" />
							</Properties>
						</Item>
					</Item>
				</Item>
				<Item class="Camera" referent="RBXD4580110BADF4830A14CCDBF10EB430F">
					<Properties>
						<BinaryString name="AttributesSerialize" />
						<CoordinateFrame name="CFrame">
							<X>-3.35789323</X>
							<Y>4.59142017</Y>
							<Z>0.820566058</Z>
							<R00>0.0947238505</R00>
							<R01>0.289338768</R01>
							<R02>-0.952528417</R02>
							<R10>-0</R10>
							<R11>0.95683074</R11>
							<R12>0.290645629</R12>
							<R20>0.995503604</R20>
							<R21>-0.0275310725</R21>
							<R22>0.0906346887</R22>
						</CoordinateFrame>
						<Ref name="CameraSubject">null</Ref>
						<token name="CameraType">0</token>
						<SecurityCapabilities name="Capabilities">0</SecurityCapabilities>
						<bool name="DefinesCapabilities">false</bool>
						<float name="FieldOfView">70</float>
						<token name="FieldOfViewMode">0</token>
						<CoordinateFrame name="Focus">
							<X>-1.1194514</X>
							<Y>3.90840292</Y>
							<Z>0.607574522</Z>
							<R00>1</R00>
							<R01>0</R01>
							<R02>0</R02>
							<R10>0</R10>
							<R11>1</R11>
							<R12>0</R12>
							<R20>0</R20>
							<R21>0</R21>
							<R22>1</R22>
						</CoordinateFrame>
						<bool name="HeadLocked">true</bool>
						<float name="HeadScale">1</float>
						<string name="Name">ThumbnailCamera</string>
						<int64 name="SourceAssetId">-1</int64>
						<BinaryString name="Tags" />
						<bool name="VRTiltAndRollEnabled">false</bool>
					</Properties>
				</Item>
			</Item>
		</Item>
		